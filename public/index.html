<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>justüîó4u ‚Äî Developer Platform</title>
  <style>
    :root{--bg1:#667eea;--bg2:#764ba2;--text:#2d3748;--muted:#4a5568;--card:#ffffff}
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text)}
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    .header{position:sticky;top:0;z-index:10;background:rgba(255,255,255,.95);backdrop-filter:blur(16px);border-bottom:1px solid rgba(0,0,0,.06)}
    .logo{font-weight:900;font-size:2rem;background:linear-gradient(135deg,var(--bg1),var(--bg2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .tag{color:var(--muted)}
    .cta{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin:16px 0}
    .cta-item{background:rgba(255,255,255,.16);border:1px solid rgba(255,255,255,.22);color:#fff;border-radius:14px;padding:16px;text-align:center;cursor:pointer}
    .section{background:var(--card);border-radius:16px;padding:20px;margin:16px 0;box-shadow:0 14px 36px rgba(0,0,0,.12)}
    .title{font-weight:900;margin:0 0 6px}
    .subtitle{color:var(--muted);margin:0 0 10px}
    .filters{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    .chipset{display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:#edf2f7;color:var(--muted);padding:6px 10px;border-radius:999px;font-weight:700;cursor:pointer;border:2px solid transparent}
    .chip.sel{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#fff;border-color:#fff}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(380px,1fr));gap:16px}
    .card{background:#fff;border-radius:14px;border:2px solid transparent;padding:16px;box-shadow:0 8px 26px rgba(0,0,0,.08)}
    .card:hover{border-color:var(--bg1)}
    .top{display:flex;justify-content:space-between;align-items:flex-start}
    .id{background:var(--bg1);color:#fff;border-radius:10px;padding:4px 10px;font-weight:800;font-size:.8rem}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .badge{background:#edf2f7;color:var(--muted);padding:4px 8px;border-radius:999px;font-weight:700}
    .ratings{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;background:linear-gradient(135deg,#f7fafc,#edf2f7);border-radius:12px;padding:10px;margin:8px 0}
    .rlabel{font-size:.7rem;color:#718096;font-weight:800;text-transform:uppercase}
    .rval{font-weight:900}
    .btn{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#fff;border:0;border-radius:20px;padding:8px 14px;font-weight:800;cursor:pointer}
    .salary{color:#48bb78;font-weight:900}
    @media(max-width:768px){.grid{grid-template-columns:1fr}.ratings{grid-template-columns:repeat(2,1fr)}}
  </style>
</head>
<body>
  <div class="header">
    <div class="wrap">
      <div class="logo">justüîó4u</div>
      <div class="tag">Find your perfect developer fast</div>
    </div>
  </div>

  <div class="wrap">
    <div class="cta">
      <div class="cta-item" onclick="show('search')">üîç Find Developers</div>
      <div class="cta-item" onclick="show('top3')">üèÜ Top 3</div>
      <div class="cta-item" onclick="show('constructor')">‚ö° Ideal Developer</div>
      <a class="cta-item" href="/admin.html" style="text-decoration:none">‚öôÔ∏è Admin</a>
    </div>

    <div id="search" class="section">
      <h2 class="title">üîç Find Developers</h2>
      <p class="subtitle">Use quick chips and ranges; results update instantly.</p>
      <div class="filters">
        <div>
          <div class="subtitle">Budget</div>
          <div>Min <input id="minSalary" type="number" value="1000" style="width:48%" /> Max <input id="maxSalary" type="number" value="8000" style="width:48%" /></div>
        </div>
        <div>
          <div class="subtitle">Experience (years)</div>
          <div>Min <input id="minExp" type="number" value="0" style="width:48%" /> Max <input id="maxExp" type="number" value="15" style="width:48%" /></div>
        </div>
        <div>
          <div class="subtitle">Min Tech Score</div>
          <input id="minTechScore" type="number" value="0" style="width:100%" />
        </div>
        <div>
          <div class="subtitle">Categories</div>
          <div id="catChips" class="chipset"></div>
        </div>
        <div>
          <div class="subtitle">Technologies</div>
          <div id="techChips" class="chipset"></div>
        </div>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px;">
        <div id="count" class="subtitle"></div>
        <select id="sort" onchange="sortRender()">
          <option value="match">Sort by Match</option>
          <option value="rating">Rating</option>
          <option value="tech">Tech Score</option>
          <option value="salary">Salary (low‚Üíhigh)</option>
          <option value="exp">Experience</option>
        </select>
      </div>
      <div id="grid" class="grid" style="margin-top:12px;"></div>
    </div>

    <div id="top3" class="section" style="display:none;">
      <h2 class="title">üèÜ Top 3 Developers</h2>
      <p class="subtitle">Best by Rating, then Tech Score.</p>
      <div id="top3grid" class="grid"></div>
    </div>

    <div id="constructor" class="section" style="display:none;">
      <h2 class="title">‚ö° Ideal Developer Constructor</h2>
      <p class="subtitle">Tell us your needs ‚Äî we‚Äôll propose perfect matches.</p>
      <div class="filters">
        <div>
          <div class="subtitle">Project Type</div>
          <select id="c_projectType" style="width:100%">
            <option value="">Select</option>
            <option>Web App</option>
            <option>Mobile App</option>
            <option>API / Backend</option>
            <option>AI/ML</option>
            <option>Data/ETL</option>
            <option>DevOps</option>
          </select>
        </div>
        <div>
          <div class="subtitle">Technologies</div>
          <input id="c_technologies" placeholder="e.g. React, Node.js" style="width:100%" />
        </div>
        <div>
          <div class="subtitle">Budget</div>
          <select id="c_budget" style="width:100%">
            <option value="">Select</option>
            <option>$1,000 - $2,000</option>
            <option>$2,000 - $4,000</option>
            <option>$4,000 - $6,000</option>
            <option>$6,000+</option>
          </select>
        </div>
        <div>
          <div class="subtitle">Your Email</div>
          <input id="c_email" type="email" placeholder="your@company.com" style="width:100%" />
        </div>
      </div>
      <div style="margin-top:12px;">
        <textarea id="c_desc" placeholder="Describe your project (optional)" style="width:100%;min-height:100px"></textarea>
      </div>
      <div style="margin-top:12px;display:flex;justify-content:flex-end">
        <button class="btn" onclick="submitConstructor()">üöÄ Send</button>
      </div>
    </div>
  </div>

  <script>
    let allDevs = []; let filtered = []; let selCats = new Set(); let selTechs = new Set();

    function show(id){ ['search','top3','constructor'].forEach(s=>document.getElementById(s).style.display='none'); document.getElementById(id).style.display='block'; if(id==='top3') renderTop3(); }

    function chip(text, set, onChange){ const s=set.has(text)?'sel':''; return `<span class="chip ${s}" onclick="toggleChip('${text}', '${onChange}')">${text}</span>`; }
    function toggleChip(val, type){ const set = type==='cat'?selCats:selTechs; if(set.has(val)) set.delete(val); else set.add(val); renderFilters(); apply(); }

    function computeMatch(d){ let s=0; if(selCats.size && selCats.has(d.category)) s+=20; const ts=d.technologies.map(x=>x.toLowerCase()); selTechs.forEach(t=>{ if(ts.includes(t.toLowerCase())) s+=10; }); return s; }

    async function load(){ const r=await fetch('/api/developers'); const data=await r.json(); allDevs=data.developers||[]; filtered=allDevs; renderFilters(); apply(); }

    function renderFilters(){
      const cats=[...new Set(allDevs.map(d=>d.category))].sort();
      const techs=[...new Set(allDevs.flatMap(d=>d.technologies))].sort();
      document.getElementById('catChips').innerHTML=cats.map(c=>chip(c, selCats,'cat')).join('');
      document.getElementById('techChips').innerHTML=techs.map(t=>chip(t, selTechs,'tech')).join('');
    }

    function apply(){
      const minSalary=Number(document.getElementById('minSalary').value||0);
      const maxSalary=Number(document.getElementById('maxSalary').value||999999);
      const minExp=Number(document.getElementById('minExp').value||0);
      const maxExp=Number(document.getElementById('maxExp').value||99);
      const minTechScore=Number(document.getElementById('minTechScore').value||0);
      filtered=allDevs.filter(d=>d.salaryUSD>=minSalary && d.salaryUSD<=maxSalary && d.experienceYears>=minExp && d.experienceYears<=maxExp && d.techScore>=minTechScore)
        .filter(d=> selCats.size===0 || selCats.has(d.category))
        .filter(d=> selTechs.size===0 || [...selTechs].some(t=> d.technologies.map(x=>x.toLowerCase()).includes(t.toLowerCase())))
        .map(d=>({...d, match:computeMatch(d)}));
      sortRender();
    }

    function sortRender(){ const v=document.getElementById('sort').value; if(v==='rating') filtered.sort((a,b)=>b.rating-a.rating||b.techScore-a.techScore); else if(v==='tech') filtered.sort((a,b)=>b.techScore-a.techScore); else if(v==='salary') filtered.sort((a,b)=>a.salaryUSD-b.salaryUSD); else if(v==='exp') filtered.sort((a,b)=>b.experienceYears-a.experienceYears); else filtered.sort((a,b)=>(b.match||0)-(a.match||0)); render(); }

    function card(d){ return `<div class="card">
      <div class="top"><div style="font-weight:800">${d.position}</div><div class="id">#${d.developerId}</div></div>
      <div class="row" style="margin:8px 0">${badge('üìÖ '+d.experienceYears+' yrs')}${badge('üåç '+d.englishLevel)}${badge('üìä '+d.projectsCount+' projects')}${badge('üü¢ '+d.availability)}</div>
      <div class="ratings">
        <div><div class="rlabel">Tech Score</div><div class="rval" style="color:#667eea">${d.techScore}</div></div>
        <div><div class="rlabel">Rating</div><div class="rval" style="color:#48bb78">${d.rating}‚òÖ</div></div>
        <div><div class="rlabel">Category</div><div class="rval" style="color:#ed8936">${d.category}</div></div>
        <div><div class="rlabel">Match</div><div class="rval" style="color:#805ad5">${d.match||'-'}</div></div>
      </div>
      <div class="row">${d.technologies.slice(0,6).map((t,i)=>badge(t,i<2?'primary':'' )).join('')}</div>
      ${d.projectSectors?.length?`<div class="row" style="margin:6px 0">${d.projectSectors.map(s=>badge(s)).join('')}</div>`:''}
      ${d.achievements?.length?`<div style="color:#4a5568;margin:6px 0">${d.achievements.map(a=>'‚Ä¢ '+a).join('<br/>')}</div>`:''}
      <div class="row" style="justify-content:space-between;border-top:1px solid #e2e8f0;padding-top:8px;margin-top:8px">
        <div class="salary">$${d.salaryUSD.toLocaleString()} / mo</div>
        <button class="btn" onclick="contact('${d.developerId}')">üíé Contact</button>
      </div>
    </div>` }

    function badge(t,c=''){return `<span class="badge ${c}">${t}</span>`}

    function render(){ document.getElementById('count').textContent=`Found ${filtered.length}`; document.getElementById('grid').innerHTML=filtered.map(card).join(''); }

    function renderTop3(){ const top=[...allDevs].sort((a,b)=>b.rating-a.rating||b.techScore-a.techScore).slice(0,3); document.getElementById('top3grid').innerHTML=top.map(card).join(''); }

    async function contact(developerId){ const name=prompt('Your Name:'); if(!name) return; const email=prompt('Your Email:'); if(!email) return; const projectDescription=prompt('Project Description (optional):')||''; const r=await fetch('/api/contact',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,developerId,projectDescription})}); const data=await r.json(); alert(data.ok?'Request sent!':'Error'); }

    async function submitConstructor(){ const projectType=document.getElementById('c_projectType').value; const technologies=document.getElementById('c_technologies').value; const budget=document.getElementById('c_budget').value; const email=document.getElementById('c_email').value; const description=document.getElementById('c_desc').value; const r=await fetch('/api/constructor',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({projectType,technologies,budget,email,description})}); const data=await r.json(); alert(data.ok?'‚úÖ Sent! We will contact you soon.':'Error'); }

    load();
  </script>
</body>
</html>